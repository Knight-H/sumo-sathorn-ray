import xml.etree.ElementTree as ET

TL_LOGIC_STRING = """<tlLogic id="cluster_46_47" type="static" programID="0" offset="0">
        <phase duration="31" state="rrrrrrrrGGGGGGGGGGGGGGGGGrrrrrrrrrrrrrrrrGGGGGGGGGGGGGGGG"/>
        <phase duration="5" state="rrrrrrrryyyyyyyyyyyyyyyyyrrrrrrrrrrrrrrrryyyyyyyyyyyyyyyy"/>
        <phase duration="31" state="GGGGggggrrrrrrrrrrrrrrrrrGGGGGGGGGGggggggrrrrrrrrrrrrrrrr"/>
        <phase duration="5" state="yyyyggggrrrrrrrrrrrrrrrrryyyyyyyyyyggggggrrrrrrrrrrrrrrrr"/>
        <phase duration="6" state="rrrrGGGGrrrrrrrrrrrrrrrrrrrrrrrrrrrGGGGGGrrrrrrrrrrrrrrrr"/>
        <phase duration="5" state="rrrryyyyrrrrrrrrrrrrrrrrrrrrrrrrrrryyyyyyrrrrrrrrrrrrrrrr"/>
    </tlLogic>"""

JUNCTION_STRING = """<junction id="cluster_46_47" type="traffic_light" x="6054.24" y="5113.84" incLanes="L40_0 L40_1 L40_2 L40_3 L197#2_0 L197#2_1 L197#2_2 L197#2_3 L197#2_4 L10189_0 L10189_1 L10189_2 L10189_3 L239_0 L239_1 L239_2 L239_3" intLanes=":cluster_46_47_0_0 :cluster_46_47_0_1 :cluster_46_47_0_2 :cluster_46_47_0_3 :cluster_46_47_57_0 :cluster_46_47_58_0 :cluster_46_47_59_0 :cluster_46_47_60_0 :cluster_46_47_8_0 :cluster_46_47_9_0 :cluster_46_47_9_1 :cluster_46_47_9_2 :cluster_46_47_9_3 :cluster_46_47_9_4 :cluster_46_47_9_5 :cluster_46_47_9_6 :cluster_46_47_9_7 :cluster_46_47_9_8 :cluster_46_47_9_9 :cluster_46_47_9_10 :cluster_46_47_9_11 :cluster_46_47_9_12 :cluster_46_47_9_13 :cluster_46_47_9_14 :cluster_46_47_9_15 :cluster_46_47_25_0 :cluster_46_47_25_1 :cluster_46_47_25_2 :cluster_46_47_28_0 :cluster_46_47_28_1 :cluster_46_47_28_2 :cluster_46_47_28_3 :cluster_46_47_28_4 :cluster_46_47_28_5 :cluster_46_47_28_6 :cluster_46_47_35_0 :cluster_46_47_35_1 :cluster_46_47_35_2 :cluster_46_47_35_3 :cluster_46_47_35_4 :cluster_46_47_35_5 :cluster_46_47_41_0 :cluster_46_47_41_1 :cluster_46_47_41_2 :cluster_46_47_41_3 :cluster_46_47_41_4 :cluster_46_47_41_5 :cluster_46_47_41_6 :cluster_46_47_41_7 :cluster_46_47_41_8 :cluster_46_47_41_9 :cluster_46_47_41_10 :cluster_46_47_41_11 :cluster_46_47_41_12 :cluster_46_47_41_13 :cluster_46_47_41_14 :cluster_46_47_41_15" shape="6042.83,5081.25 6070.94,5084.38 6080.60,5090.30 6064.94,5144.67 6063.29,5145.74 6050.32,5143.91 6026.44,5133.70 6041.38,5082.33">
        <request index="0" response="000000000000000000000000000000001111111111111111000000000" foes="000000000000000011111100000000001111111111111111011110100" cont="0"/>
        <request index="1" response="000000000000000000000000000000001111111111111111000000000" foes="000000000000000011111100000000001111111111111111011111000" cont="0"/>
        <request index="2" response="000000000000000000000000000000001111111111111111000000001" foes="000000000000000011111100000000001111111111111111011110001" cont="0"/>
        <request index="3" response="000000000000000000000000000000001111111111111111000000010" foes="000000000000000011111100000000001111111111111111011110010" cont="0"/>
        <request index="4" response="111111111111111100000011111111111111111111111111000000000" foes="111111111111111100000011111111111111111111111111001001111" cont="1"/>
        <request index="5" response="111111111111111100000011111111111111111111111111000000000" foes="111111111111111100000011111111111111111111111111010001111" cont="1"/>
        <request index="6" response="111111111111111100000011111111111111111111111111000010000" foes="111111111111111100000011111111111111111111111111000011111" cont="1"/>
        <request index="7" response="111111111111111100000011111111111111111111111111000100000" foes="111111111111111100000011111111111111111111111111000101111" cont="1"/>
        <request index="8" response="000000000000000000000000000000000000000000000000000000000" foes="000000000000000000000011111110001111111111111111000000000" cont="0"/>
        <request index="9" response="000000000000000000000000000000000000000000000000000000000" foes="000000000000000011111111111110000001000100010000011111111" cont="0"/>
        <request index="10" response="000000000000000000000000000000000000000000000000000000000" foes="000000000000000011111111111110000010001000100000011111111" cont="0"/>
        <request index="11" response="000000000000000000000000000000000000000000000000000000000" foes="000000000000000011111111111110000100010001000000011111111" cont="0"/>
        <request index="12" response="000000000000000000000000000000000000000000000000000000000" foes="000000000000000011111111111110001000100010000000011111111" cont="0"/>
        <request index="13" response="000000000000000000000000000000000000000000000001000000000" foes="000000000000000011111111111110000001000100000001011111111" cont="0"/>
        <request index="14" response="000000000000000000000000000000000000000000000010000000000" foes="000000000000000011111111111110000010001000000010011111111" cont="0"/>
        <request index="15" response="000000000000000000000000000000000000000000000100000000000" foes="000000000000000011111111111110000100010000000100011111111" cont="0"/>
        <request index="16" response="000000000000000000000000000000000000000000001000000000000" foes="000000000000000011111111111110001000100000001000011111111" cont="0"/>
        <request index="17" response="000000000000000000000000000000000000000000010001000000000" foes="000000000000000011111111111110000001000000010001011111111" cont="0"/>
        <request index="18" response="000000000000000000000000000000000000000000100010000000000" foes="000000000000000011111111111110000010000000100010011111111" cont="0"/>
        <request index="19" response="000000000000000000000000000000000000000001000100000000000" foes="000000000000000011111111111110000100000001000100011111111" cont="0"/>
        <request index="20" response="000000000000000000000000000000000000000010001000000000000" foes="000000000000000011111111111110001000000010001000011111111" cont="0"/>
        <request index="21" response="000000000000000000000000000000000000000100010001000000000" foes="000000000000000011111111111110000000000100010001011111111" cont="0"/>
        <request index="22" response="000000000000000000000000000000000000001000100010000000000" foes="000000000000000011111111111110000000001000100010011111111" cont="0"/>
        <request index="23" response="000000000000000000000000000000000000010001000100000000000" foes="000000000000000011111111111110000000010001000100011111111" cont="0"/>
        <request index="24" response="000000000000000000000000000000000000100010001000000000000" foes="000000000000000011111111111110000000100010001000011111111" cont="0"/>
        <request index="25" response="111111111111111100000000000000000000000000000000000000000" foes="111111111111111111111111110000000000000000000000011110000" cont="0"/>
        <request index="26" response="111111111111111100000000000000000000000000000000000000000" foes="111111111111111111111111110000000000000000000000011110000" cont="0"/>
        <request index="27" response="111111111111111100000000000000000000000000000000000000000" foes="111111111111111111111111110000000000000000000000011110000" cont="0"/>
        <request index="28" response="111111111111111100000000000000001111111111111111100000000" foes="111111111111111100000000010000001111111111111111111110000" cont="0"/>
        <request index="29" response="111111111111111100000000000000001111111111111111100000000" foes="111111111111111100000000100000001111111111111111111110000" cont="0"/>
        <request index="30" response="111111111111111100000000000000001111111111111111100000000" foes="111111111111111100000001000000001111111111111111111110000" cont="0"/>
        <request index="31" response="111111111111111100000000000010001111111111111111100000000" foes="111111111111111100000000000010001111111111111111111110000" cont="0"/>
        <request index="32" response="111111111111111100000000000100001111111111111111100000000" foes="111111111111111100000000000100001111111111111111111110000" cont="0"/>
        <request index="33" response="111111111111111100000000001000001111111111111111100000000" foes="111111111111111100000000001000001111111111111111111110000" cont="0"/>
        <request index="34" response="111111111111111100000000000000001111111111111111100000000" foes="111111111111111100000000000000001111111111111111111110000" cont="0"/>
        <request index="35" response="111111111111111100000000000000001111111111111111000001111" foes="111111111111111101010000001111111111111111111111000001111" cont="0"/>
        <request index="36" response="111111111111111100000000000000001111111111111111000001111" foes="111111111111111110100000001111111111111111111111000001111" cont="0"/>
        <request index="37" response="111111111111111100000100000000001111111111111111000001111" foes="111111111111111101000111111111111111111111111111000001111" cont="0"/>
        <request index="38" response="111111111111111100001000000000001111111111111111000001111" foes="111111111111111110001011111111111111111111111111000001111" cont="0"/>
        <request index="39" response="111111111111111100010100000000001111111111111111000001111" foes="111111111111111100010111111111111111111111111111000001111" cont="0"/>
        <request index="40" response="111111111111111100101000000000001111111111111111000001111" foes="111111111111111100101011111111111111111111111111000001111" cont="0"/>
        <request index="41" response="000000000000000000000000000000000000000000000000000000000" foes="000100010001000011111111111111110000000000000000011110000" cont="0"/>
        <request index="42" response="000000000000000000000000000000000000000000000000000000000" foes="001000100010000011111111111111110000000000000000011110000" cont="0"/>
        <request index="43" response="000000000000000000000000000000000000000000000000000000000" foes="010001000100000011111111111111110000000000000000011110000" cont="0"/>
        <request index="44" response="000000000000000000000000000000000000000000000000000000000" foes="100010001000000011111111111111110000000000000000011110000" cont="0"/>
        <request index="45" response="000000000000000100000000000000000000000000000000000000000" foes="000100010000000111111111111111110000000000000000011110000" cont="0"/>
        <request index="46" response="000000000000001000000000000000000000000000000000000000000" foes="001000100000001011111111111111110000000000000000011110000" cont="0"/>
        <request index="47" response="000000000000010000000000000000000000000000000000000000000" foes="010001000000010011111111111111110000000000000000011110000" cont="0"/>
        <request index="48" response="000000000000100000000000000000000000000000000000000000000" foes="100010000000100011111111111111110000000000000000011110000" cont="0"/>
        <request index="49" response="000000000001000100000000000000000000000000000000000000000" foes="000100000001000111111111111111110000000000000000011110000" cont="0"/>
        <request index="50" response="000000000010001000000000000000000000000000000000000000000" foes="001000000010001011111111111111110000000000000000011110000" cont="0"/>
        <request index="51" response="000000000100010000000000000000000000000000000000000000000" foes="010000000100010011111111111111110000000000000000011110000" cont="0"/>
        <request index="52" response="000000001000100000000000000000000000000000000000000000000" foes="100000001000100011111111111111110000000000000000011110000" cont="0"/>
        <request index="53" response="000000010001000100000000000000000000000000000000000000000" foes="000000010001000111111111111111110000000000000000011110000" cont="0"/>
        <request index="54" response="000000100010001000000000000000000000000000000000000000000" foes="000000100010001011111111111111110000000000000000011110000" cont="0"/>
        <request index="55" response="000001000100010000000000000000000000000000000000000000000" foes="000001000100010011111111111111110000000000000000011110000" cont="0"/>
        <request index="56" response="000010001000100000000000000000000000000000000000000000000" foes="000010001000100011111111111111110000000000000000011110000" cont="0"/>
    </junction>"""

root = ET.fromstring(TL_LOGIC_STRING)

INDEX_TO_KEEP = [0,3,4,7,9,14,19,24,25,26,28,29,33,34,35,37,38,40,41,46,51,56]

for phase in root:
    state = ""
    for i in INDEX_TO_KEEP:
        state += phase.attrib['state'][i]
    phase.attrib['state'] = state
##    print(phase.attrib)

ET.dump(root)
        
root = ET.fromstring(JUNCTION_STRING)
for request in root:
    response = ""
    foes = ""
    
    for i in INDEX_TO_KEEP:
        response += request.attrib['response'][i]
        foes += request.attrib['foes'][i]

    request.attrib['response'] = response
    request.attrib['foes'] = foes

ET.dump(root)
